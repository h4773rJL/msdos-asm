STACKSG SEGMENT PARA STACK 'STACK'
           DW    20    DUP(0)
STACKSG ENDS
DATASG SEGMENT PARA 'DATA'
        DISPROW     DB     16 DUP(5 DUP(' ')),13
        HEXCHAR     DB     00
        XLATAB      DB     30H,31H,32H,33H,34H,35H,36H,37H,38H,39H
                    DB     41H,42H,43H,44H,45H,46H
DATASG ENDS
CODESG SEGMENT PARA 'CODE'
PRINCI PROC FAR
       ASSUME CS:CODESG, DS:DATASG, SS:STACKSG
INICIO:PUSH DS
       XOR AX,AX
       PUSH AX
       MOV AX,DATASG
       MOV DS,AX
       CALL LIMPIA
       LEA SI,DISPROW
CICLO: CALL TRADUCE
       CALL DESPLIEGA
       CMP HEXCHAR,0FFH
       JE FIN
       INC HEXCHAR
       JMP CICLO
FIN:   MOV AX,4C00H
       INT 21H
PRINCI ENDP
TRADUCE PROC NEAR
       MOV AH,00
       MOV AL,HEXCHAR
       MOV CL,04
       SHR AX,CL
       LEA BX,XLATAB
       XLAT
       MOV [SI],AL
       MOV AL,HEXCHAR
       AND AL,0FH
       XLAT
       MOV [SI]-1,AL
       RET
TRADUCE ENDP
DESPLIEGA PROC NEAR
       MOV AL,HEXCHAR
       MOV [SI]-3,AL
       CMP AL,1AH
       JE CICLO3
       CMP AL,07H
       JB CICLO1
       CMP AL,10H
       JAE CICLO1
CICLO3: MOV BYTE PTR [SI]-3,20H
CICLO1:ADD SI,05
       LEA DI,DISPROW+80
       CMP DI,SI
       JNE CICLO2
       MOV AH,40H
       MOV BX,01
       MOV CX,81
       LEA DX,DISPROW
       INT 21H
       LEA SI,DISPROW
CICLO2:RET
DESPLIEGA ENDP
LIMPIA PROC NEAR
       MOV AX,0600H
       MOV BH,61H
       MOV CX,0000
       MOV CX,184FH
       INT 10H
       RET
LIMPIA ENDP
      CODESG ENDS
      END INICIO

